{% assign rk_related_title = 'Related Recipes' %}
{% assign rk_related_title_font_size = '26px' %}
{% assign rk_related_item_title_font_size = '21px' %}
{% assign rk_related_item_text_font_size = '14px' %}

{%- assign rk_resource_id = article.id | downcase -%}
{%- assign rk_mf = article.metafields.recipekit[rk_resource_id] -%}
{%- assign rk_settings = shop.metafields.recipekit.settings -%}
{%- if rk_mf != blank -%}
<div class="rk_related_recipes">
  <h3 class="rk_related_title">
    {{ rk_related_title }}
  </h3>
  {% assign count = 0 %}
  <div class="rk_related_grid">
    {%- for article in blog.articles -%}
      {% unless current_article.id == article.id %}
        <div class="rk_related_item">
          <a href="{{ article.url }}">
            {%- if article.image -%}
              <img src="{{ article.image | img_url: '500x' }}" alt="{{ article.image.alt }}">
            {%- endif -%}
            <h4 class="rk_related_item_title">{{ article.title }}</h4>
            <p class="rk_related_item_text">
              {%- if article.excerpt.size > 0 -%}
                {{ article.excerpt }}
              {%- else -%}
                {{ article.content | strip_html | truncate: 150 }}
              {%- endif -%}
            </p>
          </a>
        </div>
        {% assign count = count | plus: 1 %}
      {% endunless %}
      {% if count == 3 %}
        {% break %}
      {% endif %}
    {%- endfor -%}
  </div>

</div>

<style>
  .rk_related_title {
    font-size: {{ rk_related_title_font_size }} !important;
    padding: 10px;
    border-bottom: 1px solid #ccc;
    margin: 0 !important;
  }

  .rk_related_grid {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
  }

  .rk_related_item {
    flex-basis: 100%;
    padding: 10px;
  }

  @media screen and (min-width: 800px) {
    .rk_related_item {
      flex: 1;
    }
  }

  .rk_related_item_title {
    font-size: {{ rk_related_item_title_font_size }} !important;
    padding: 10px 0;
    border-bottom: 1px solid #ccc;
    margin: 0 !important;
  }

  .rk_related_item_text {
    font-size: {{ rk_related_item_text_font_size }} !important;
    padding-top: 10px;
  }

  .rk_related_item img {
    width: 100%;
    object-fit: cover;
    max-width: 100%;
    height: 200px;
  }

  /* Debut Theme Fix */
  .rte a:not(.btn) {
    border-bottom: none;
    padding-bottom: 0;
  }
</style>
{% endif %}